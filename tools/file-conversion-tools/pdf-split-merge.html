<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Splitter & Merger | EveryTool.tech</title>
    <meta name="description" content="Split and merge PDFs in your browser. Upload PDFs, select pages, reorder with drag-and-drop, preview thumbnails, and download results.">
    <link rel="icon" type="image/png" href="/assets/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/FAQ section/faq.css">
    <link rel="stylesheet" href="/tools/tool.css">
    <link rel="stylesheet" href="/back-to-top.css">
    <script src="/back-to-top.js"></script>
    <style>
        #header-placeholder { min-height: 130px; position: relative; z-index: 2000; }
        @media (max-width: 768px){ #header-placeholder{ min-height: 64px; } }
        .thumb-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(140px,1fr)); gap: .75rem; }
        .thumb { background:#fff; border:1px solid var(--bg-accent); border-radius: var(--radius-md); padding:.5rem; position:relative; cursor:grab; }
        .thumb canvas { width:100%; height:auto; display:block; }
        .thumb .label { position:absolute; top:.35rem; left:.4rem; font-size:.8rem; background:rgba(0,0,0,.6); color:#fff; padding:.1rem .35rem; border-radius:4px; }
        .thumb input[type=checkbox]{ position:absolute; top:.35rem; right:.4rem; }
        .actions { display:flex; gap:.5rem; flex-wrap:wrap; }
        /* UI normalization overrides */
        .tool-display__button { min-height: 40px; padding: 0.5rem 1rem; font-size: 0.95rem; }
        .tool-display__file-label { padding: 0.75rem; }
        .tool-display__wrapper { padding: 1.5rem; }
        .actions { gap: 0.5rem; }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>
    <section class="tool-hero">
        <div class="tool-hero__container">
            <div class="tool-hero__content">
                <div class="tool-hero__left">
                    <h1 class="tool-hero__title">PDF Splitter & Merger</h1>
                    <p class="tool-hero__description">Reorder pages by drag & drop, select ranges to split, preview thumbnails, and download â€” all locally.</p>
                    <div class="tool-hero__features">
                        <div class="tool-feature"><i class="fas fa-th"></i><span>Thumbnails</span></div>
                        <div class="tool-feature"><i class="fas fa-arrows-alt"></i><span>Drag & Drop Order</span></div>
                        <div class="tool-feature"><i class="fas fa-cut"></i><span>Split & Merge</span></div>
                    </div>
                    <div class="tool-hero__cta">
                        <a href="#tool-display" class="tool-button tool-button--primary"><i class="fas fa-play"></i> Use Tool Now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="tool-display" class="tool-display">
        <div class="tool-display__container">
            <div class="tool-display__wrapper">
                <div class="tool-display__header">
                    <h2 class="tool-display__title">Manage PDF Pages</h2>
                    <p class="tool-display__description">Upload one or more PDFs. Use the page checkboxes for splitting or drag to reorder for merging.</p>
                </div>
                <div class="tool-display__content">
                    <div class="tool-display__input-section">
                        <div class="tool-display__file-upload">
                            <input id="fileInput" type="file" class="tool-display__file-input" accept="application/pdf" multiple>
                            <label for="fileInput" class="tool-display__file-label"><i class="fas fa-cloud-upload-alt"></i><span>Choose or drop PDF files</span></label>
                        </div>
                        <div class="actions" style="margin-top:.75rem;">
                            <button id="splitBtn" class="tool-display__button"><i class="fas fa-scissors"></i> Split to New PDF</button>
                            <button id="mergeBtn" class="tool-display__button tool-display__button--secondary"><i class="fas fa-object-group"></i> Merge (Current Order)</button>
                            <button id="clearBtn" class="tool-display__button tool-display__button--secondary"><i class="fas fa-trash"></i> Clear</button>
                        </div>
                    </div>
                    <div class="tool-display__output-section">
                        <div class="thumb-grid" id="thumbGrid"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="footer-placeholder"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script>
    const q=(s,d=document)=>d.querySelector(s); const qa=(s,d=document)=>Array.from(d.querySelectorAll(s));
    const fileInput=q('#fileInput'); const grid=q('#thumbGrid'); const splitBtn=q('#splitBtn'); const mergeBtn=q('#mergeBtn'); const clearBtn=q('#clearBtn');
    const pages=[]; // {pdfBytes, pageIndex, canvas, selected}

    function clearAll(){ pages.length=0; grid.innerHTML=''; }
    function addThumb(page, index){
        const div=document.createElement('div'); div.className='thumb'; div.draggable=true; div.dataset.idx=index;
        const label=document.createElement('div'); label.className='label'; label.textContent=String(index+1); div.appendChild(label);
        const cb=document.createElement('input'); cb.type='checkbox'; cb.checked=false; cb.addEventListener('change',()=>{ page.selected=cb.checked; }); div.appendChild(cb);
        div.appendChild(page.canvas); grid.appendChild(div);
    }
    function refreshGrid(){ grid.innerHTML=''; pages.forEach((p,i)=> addThumb(p,i)); }

    async function renderPdfToThumbs(file){
        // Ensure worker set (reliable rendering)
        if (window.pdfjsLib && pdfjsLib.GlobalWorkerOptions) {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js';
        }
        const bytes= new Uint8Array(await file.arrayBuffer());
        const pdf = await pdfjsLib.getDocument({ data: bytes }).promise;
        for(let i=1;i<=pdf.numPages;i++){
            const page= await pdf.getPage(i);
            const vp= page.getViewport({ scale: 0.3 });
            const canvas=document.createElement('canvas'); const ctx=canvas.getContext('2d'); canvas.width=vp.width; canvas.height=vp.height;
            await page.render({ canvasContext: ctx, viewport: vp }).promise;
            pages.push({ pdfBytes: bytes, pageIndex: i-1, canvas, selected:false });
        }
        refreshGrid();
    }

    // Drag & drop reorder
    let dragIndex=null;
    grid.addEventListener('dragstart', e=>{ const card=e.target.closest('.thumb'); if(!card) return; dragIndex=+card.dataset.idx; e.dataTransfer.setData('text/plain', dragIndex); });
    grid.addEventListener('dragover', e=>{ e.preventDefault(); });
    grid.addEventListener('drop', e=>{ e.preventDefault(); const card=e.target.closest('.thumb'); if(!card) return; const toIndex=+card.dataset.idx; if(dragIndex==null||toIndex==null||dragIndex===toIndex) return; const [item]=pages.splice(dragIndex,1); pages.splice(toIndex,0,item); dragIndex=null; refreshGrid(); });

    async function splitSelected(){
        const { PDFDocument } = PDFLib;
        const out = await PDFDocument.create();
        for(const p of pages){
            if(!p.selected) continue;
            const src= await PDFDocument.load(p.pdfBytes);
            const [copied] = await out.copyPages(src, [p.pageIndex]);
            out.addPage(copied);
        }
        const bytes= await out.save();
        const a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([bytes],{type:'application/pdf'})); a.download='split.pdf'; a.click(); URL.revokeObjectURL(a.href);
    }
    async function mergeOrder(){
        const { PDFDocument } = PDFLib; const out = await PDFDocument.create();
        for(const p of pages){
            const src= await PDFDocument.load(p.pdfBytes);
            const [copied] = await out.copyPages(src,[p.pageIndex]);
            out.addPage(copied);
        }
        const bytes= await out.save();
        const a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([bytes],{type:'application/pdf'})); a.download='merged.pdf'; a.click(); URL.revokeObjectURL(a.href);
    }

    fileInput.addEventListener('change', e=>{ clearAll(); [...e.target.files].forEach(renderPdfToThumbs); });
    splitBtn.addEventListener('click', splitSelected);
    mergeBtn.addEventListener('click', mergeOrder);
    clearBtn.addEventListener('click', clearAll);
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const loadScript = (src) => new Promise((resolve, reject) => { const s=document.createElement('script'); s.src=src; s.onload=()=>resolve(s); s.onerror=()=>reject(new Error('load '+src)); document.body.appendChild(s); });
        const loadHeader = () => { const el=document.getElementById('header-placeholder'); if(!el) return; fetch('/header.html').then(r=>r.ok?r.text():Promise.reject('header')).then(html=>{ el.innerHTML=html; return loadScript('https://cdn.jsdelivr.net/npm/fuse.js@6.6.2'); }).then(()=>loadScript('/header-search.js')).then(()=>{ if(typeof initializeHeader==='function') initializeHeader(); }).catch(console.error); };
        const loadFooter = () => { const el=document.getElementById('footer-placeholder'); if(!el) return; fetch('/footer.html').then(r=>r.ok?r.text():Promise.reject('footer')).then(html=>{ el.innerHTML=html; }).catch(console.error); };
        loadHeader(); loadFooter();
    });
    </script>
    <script src="/app-loader.js" defer></script>
</body>
</html>


